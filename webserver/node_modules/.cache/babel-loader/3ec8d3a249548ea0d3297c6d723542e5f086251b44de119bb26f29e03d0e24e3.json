{"ast":null,"code":"import React,{useEffect,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ImageSection=()=>{const[latestImage,setLatestImage]=useState(null);const[analyzedImage,setAnalyzedImage]=useState(null);const[latestAudio,setLatestAudio]=useState(null);const[analyzedAudio,setAnalyzedAudio]=useState(null);useEffect(()=>{const fetchImages=()=>{fetch('http://220.149.235.221:4000/api/images').then(res=>res.json()).then(fileList=>{const sorted=fileList.filter(name=>name.startsWith('frame_')&&name.endsWith('.jpg')).sort((a,b)=>{const getTime=f=>{const match=f.match(/frame_(\\d+)(?:_result)?\\.jpg/);return match?parseInt(match[1]):0;};return getTime(b)-getTime(a);});if(sorted.length>0){setLatestImage(`http://220.149.235.221:4000/images/${sorted[0]}`);}else{setLatestImage(null);}}).catch(err=>{console.error(\"❌ 이미지 불러오기 실패:\",err);setLatestImage(null);});fetch('http://220.149.235.221:4000/api/images_result').then(res=>res.json()).then(fileList=>{const sorted=fileList.filter(name=>name.endsWith('.jpg')).sort((a,b)=>{const getTime=f=>{const match=f.match(/frame_(\\d+)(?:_result)?\\.jpg/);return match?parseInt(match[1]):0;};return getTime(b)-getTime(a);});if(sorted.length>0){setAnalyzedImage(`http://220.149.235.221:4000/images_result/${sorted[0]}`);}else{setAnalyzedImage(null);}}).catch(err=>{console.error(\"❌ 분석 이미지 불러오기 실패:\",err);setAnalyzedImage(null);});fetch('http://220.149.235.221:4000/api/sounds').then(res=>res.json()).then(fileList=>{const sorted=fileList.filter(name=>name.endsWith('.wav')||name.endsWith('.mp3')).sort((a,b)=>{const getTime=f=>{const match=f.match(/(\\d+)/);return match?parseInt(match[1]):0;};return getTime(b)-getTime(a);});if(sorted.length>0){setLatestAudio(`http://220.149.235.221:4000/sounds/${sorted[0]}`);setAnalyzedAudio(`http://220.149.235.221:4000/sounds/${sorted[0].replace('.wav','_result.wav')}`);}else{setLatestAudio(null);setAnalyzedAudio(null);}}).catch(err=>{console.error(\"❌ 오디오 불러오기 실패:\",err);setLatestAudio(null);setAnalyzedAudio(null);});};fetchImages();const interval=setInterval(fetchImages,5000);return()=>clearInterval(interval);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 grid grid-rows-2 gap-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center font-bold text-lg mb-3\",children:\"\\uCD5C\\uADFC\\uC5D0 \\uCC0D\\uD78C \\uC0AC\\uC9C4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border border-black h-72 flex items-center justify-center\",children:latestImage?/*#__PURE__*/_jsx(\"img\",{src:latestImage,alt:\"\\uCD5C\\uADFC \\uC774\\uBBF8\\uC9C0\",className:\"max-h-full object-contain\"}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"\\uC774\\uBBF8\\uC9C0\\uB97C \\uBD88\\uB7EC\\uC624\\uB294 \\uC911...\"})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center font-bold text-lg mb-3\",children:\"AI\\uAC00 \\uBD84\\uC11D\\uD55C \\uC0AC\\uC9C4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border border-black h-72 flex items-center justify-center\",children:analyzedImage?/*#__PURE__*/_jsx(\"img\",{src:analyzedImage,alt:\"AI \\uBD84\\uC11D \\uC774\\uBBF8\\uC9C0\",className:\"max-h-full object-contain\"}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"\\uBD84\\uC11D \\uC774\\uBBF8\\uC9C0\\uB97C \\uBD88\\uB7EC\\uC624\\uB294 \\uC911...\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center font-bold text-lg mb-3\",children:\"\\uCD5C\\uADFC\\uC5D0 \\uB179\\uC74C\\uB41C \\uC74C\\uC131\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border border-black h-36 flex items-center justify-center\",children:latestAudio?/*#__PURE__*/_jsxs(\"audio\",{controls:true,children:[/*#__PURE__*/_jsx(\"source\",{src:latestAudio}),\"\\uBE0C\\uB77C\\uC6B0\\uC800\\uAC00 \\uC624\\uB514\\uC624 \\uD0DC\\uADF8\\uB97C \\uC9C0\\uC6D0\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\"]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"\\uC624\\uB514\\uC624\\uB97C \\uBD88\\uB7EC\\uC624\\uB294 \\uC911...\"})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center font-bold text-lg mb-3\",children:\"AI\\uAC00 \\uBD84\\uC11D\\uD55C \\uC74C\\uC131\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border border-black h-36 flex items-center justify-center\",children:analyzedAudio?/*#__PURE__*/_jsxs(\"audio\",{controls:true,children:[/*#__PURE__*/_jsx(\"source\",{src:analyzedAudio}),\"\\uBE0C\\uB77C\\uC6B0\\uC800\\uAC00 \\uC624\\uB514\\uC624 \\uD0DC\\uADF8\\uB97C \\uC9C0\\uC6D0\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\"]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"\\uBD84\\uC11D \\uC624\\uB514\\uC624\\uB97C \\uBD88\\uB7EC\\uC624\\uB294 \\uC911...\"})})]})]})]});};export default ImageSection;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","ImageSection","latestImage","setLatestImage","analyzedImage","setAnalyzedImage","latestAudio","setLatestAudio","analyzedAudio","setAnalyzedAudio","fetchImages","fetch","then","res","json","fileList","sorted","filter","name","startsWith","endsWith","sort","a","b","getTime","f","match","parseInt","length","catch","err","console","error","replace","interval","setInterval","clearInterval","className","children","src","alt","controls"],"sources":["/home/getout/workspace/my-tailwind-site/src/components/ImageSection.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nconst ImageSection = () => {\n  const [latestImage, setLatestImage] = useState(null);\n  const [analyzedImage, setAnalyzedImage] = useState(null);\n  const [latestAudio, setLatestAudio] = useState(null);\n  const [analyzedAudio, setAnalyzedAudio] = useState(null);\n\n  useEffect(() => {\n    const fetchImages = () => {\n      fetch('http://220.149.235.221:4000/api/images')\n        .then(res => res.json())\n        .then(fileList => {\n          const sorted = fileList\n            .filter(name => name.startsWith('frame_') && name.endsWith('.jpg'))\n            .sort((a, b) => {\n              const getTime = f => {\n                const match = f.match(/frame_(\\d+)(?:_result)?\\.jpg/);\n                return match ? parseInt(match[1]) : 0;\n              };\n              return getTime(b) - getTime(a);\n            });\n\n          if (sorted.length > 0) {\n            setLatestImage(`http://220.149.235.221:4000/images/${sorted[0]}`);\n          } else {\n            setLatestImage(null);\n          }\n        })\n        .catch(err => {\n          console.error(\"❌ 이미지 불러오기 실패:\", err);\n          setLatestImage(null);\n        });\n\n      fetch('http://220.149.235.221:4000/api/images_result')\n        .then(res => res.json())\n        .then(fileList => {\n          const sorted = fileList\n            .filter(name => name.endsWith('.jpg'))\n            .sort((a, b) => {\n              const getTime = f => {\n                const match = f.match(/frame_(\\d+)(?:_result)?\\.jpg/);\n                return match ? parseInt(match[1]) : 0;\n              };\n              return getTime(b) - getTime(a);\n            });\n\n          if (sorted.length > 0) {\n            setAnalyzedImage(`http://220.149.235.221:4000/images_result/${sorted[0]}`);\n          } else {\n            setAnalyzedImage(null);\n          }\n        })\n        .catch(err => {\n          console.error(\"❌ 분석 이미지 불러오기 실패:\", err);\n          setAnalyzedImage(null);\n        });\n\n      fetch('http://220.149.235.221:4000/api/sounds')\n        .then(res => res.json())\n        .then(fileList => {\n          const sorted = fileList\n            .filter(name => name.endsWith('.wav') || name.endsWith('.mp3'))\n            .sort((a, b) => {\n              const getTime = f => {\n                const match = f.match(/(\\d+)/);\n                return match ? parseInt(match[1]) : 0;\n              };\n              return getTime(b) - getTime(a);\n            });\n\n          if (sorted.length > 0) {\n            setLatestAudio(`http://220.149.235.221:4000/sounds/${sorted[0]}`);\n            setAnalyzedAudio(`http://220.149.235.221:4000/sounds/${sorted[0].replace('.wav', '_result.wav')}`);\n          } else {\n            setLatestAudio(null);\n            setAnalyzedAudio(null);\n          }\n        })\n        .catch(err => {\n          console.error(\"❌ 오디오 불러오기 실패:\", err);\n          setLatestAudio(null);\n          setAnalyzedAudio(null);\n        });\n    };\n\n    fetchImages();\n    const interval = setInterval(fetchImages, 5000);\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div className=\"p-8 grid grid-rows-2 gap-12\">\n      <div className=\"grid grid-cols-2 gap-6\">\n        <div>\n          <div className=\"text-center font-bold text-lg mb-3\">최근에 찍힌 사진</div>\n          <div className=\"border border-black h-72 flex items-center justify-center\">\n            {latestImage ? (\n              <img src={latestImage} alt=\"최근 이미지\" className=\"max-h-full object-contain\" />\n            ) : (\n              <span className=\"text-gray-500\">이미지를 불러오는 중...</span>\n            )}\n          </div>\n        </div>\n        <div>\n          <div className=\"text-center font-bold text-lg mb-3\">AI가 분석한 사진</div>\n          <div className=\"border border-black h-72 flex items-center justify-center\">\n            {analyzedImage ? (\n              <img src={analyzedImage} alt=\"AI 분석 이미지\" className=\"max-h-full object-contain\" />\n            ) : (\n              <span className=\"text-gray-500\">분석 이미지를 불러오는 중...</span>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-2 gap-6\">\n        <div>\n          <div className=\"text-center font-bold text-lg mb-3\">최근에 녹음된 음성</div>\n          <div className=\"border border-black h-36 flex items-center justify-center\">\n            {latestAudio ? (\n              <audio controls>\n                <source src={latestAudio} />\n                브라우저가 오디오 태그를 지원하지 않습니다.\n              </audio>\n            ) : (\n              <span className=\"text-gray-500\">오디오를 불러오는 중...</span>\n            )}\n          </div>\n        </div>\n        <div>\n          <div className=\"text-center font-bold text-lg mb-3\">AI가 분석한 음성</div>\n          <div className=\"border border-black h-36 flex items-center justify-center\">\n            {analyzedAudio ? (\n              <audio controls>\n                <source src={analyzedAudio} />\n                브라우저가 오디오 태그를 지원하지 않습니다.\n              </audio>\n            ) : (\n              <span className=\"text-gray-500\">분석 오디오를 불러오는 중...</span>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ImageSection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}